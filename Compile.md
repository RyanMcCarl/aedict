# Preparing #

To compile aedict, you'll have to [download Maven 2.2.x](http://maven.apache.org/download.html) (do not use Maven 3.x.x, the Android plugin is not yet compatible with this Maven version) and [Android SDK 2.2 or higher](http://developer.android.com/sdk/android-2.2.html). Then, check-out the application:

```
hg clone https://aedict.googlecode.com/hg/ aedict
```

You'll need to configure the location of your Android SDK (i.e. configure the Masa plugin toolchain). Just place a file named toolchains.xml to your HOME/.m2/ directory:

```
<?xml version="1.0" encoding="UTF8"?>
<toolchains>
  <toolchain>
     <type>android</type>
     <provides>
        <id>android-2.2</id>
        <version>2.2</version>
     </provides>
     <configuration>
         <toolPaths>
            <toolPath>/home/vyzivus/local/android-sdk-linux_x86/tools</toolPath>
            <toolPath>/home/vyzivus/local/android-sdk-linux_x86/platforms/android-8/tools</toolPath>
         </toolPaths>
     </configuration>
  </toolchain>
</toolchains>
```

Next, you need to generate the `debug.keystore` key:

```
keytool -genkeypair -keystore debug.keystore -keypass android -alias
 androiddebugkey -storepass android
```
Please use the following values: CN: "CN=Android Debug,O=Android,C=US". The `keytool` program is part of the Java JDK.

When the `debug.keystore` is generated, just put it to the `$HOME/.android/` folder.

Note: the debug key is also auto-generated by Eclipse when an Android application is run for the first time.

# Compiling #

To compile:

```
cd aedict
mvn clean install -e
```

You'll find the apk package in the `aedict-apk/target/` directory - the `aedict-apk-VERSION-signed.apk`.

You can skip tests to speed up the compilation process:
```
mvn clean install -e -DskipTests
```

Afterwards, it is necessary to just compile the aedict-apk project:
```
cd aedict-apk
mvn clean install -e
```
No need to skip tests here, they run very quickly.

# Troubleshooting #

  * If the build fails with OutOfMemory, try increasing the memory by defining a system environment property prior compilation:
```
export MAVEN_OPTS="-Xmx512m"
mvn clean install
```
  * If the build fails with `Keystore not specified and could not locate default debug.keystore` you'll have to generate the `debug.keystore` file and put it into the correct location: $HOME/.android/debug.keystore
  * Building on MacOSX fails on tests - see [Issue 5](https://code.google.com/p/aedict/issues/detail?id=5) for details.

## Troubleshooting on Windows ##

  * Building on Windows fails in dex building phase: [Issue 4217](http://code.google.com/p/android/issues/detail?id=4217). Workaround: open `aedict-apk/pom.xml` and comment out the line containing `<jvmArguments><jvmArgument>-Xmx512m</jvmArgument></jvmArguments>`. Then, edit the `android-sdk-windows-1.6-r1/platforms/android-1.6/tools/dx.bat` and uncomment the `set javaOpts=-Xmx256m` line. Then, edit the `$PATH` environment variable and add the following entries: `android-sdk-windows-1.6-r1/tools` and `android-sdk-windows-1.6-r1/platforms/android-1.6/tools`
  * 'jarsigner' is not recognized as ...: you'll have to add Java bin directory to your `$PATH`